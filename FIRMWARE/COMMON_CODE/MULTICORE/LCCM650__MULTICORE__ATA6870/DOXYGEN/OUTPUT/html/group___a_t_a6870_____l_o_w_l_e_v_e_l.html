<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>(C Code, MULTICORE, ATA6870N Driver): ATA6870__LOWLEVEL</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="sil3_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="SIL3_LOGO_180X50.BMP"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">(C Code, MULTICORE, ATA6870N Driver)
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___a_t_a6870_____l_o_w_l_e_v_e_l.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">ATA6870__LOWLEVEL<div class="ingroups"><a class="el" href="group___m_u_l_t_i_c_o_r_e.html">MULTICORE</a> &raquo; <a class="el" href="group___a_t_a6870.html">ATA6870</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for ATA6870__LOWLEVEL:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group___a_t_a6870_____l_o_w_l_e_v_e_l.png" border="0" alt="" usemap="#group______a__t__a6870__________l__o__w__l__e__v__e__l"/>
<map name="group______a__t__a6870__________l__o__w__l__e__v__e__l" id="group______a__t__a6870__________l__o__w__l__e__v__e__l">
<area shape="rect" id="node1" href="group___a_t_a6870.html" title="ATA6870" alt="" coords="5,5,80,32"/>
</map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga92592440101f5f45a271920b6d40a773"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___a_t_a6870_____l_o_w_l_e_v_e_l.html#ga92592440101f5f45a271920b6d40a773">vATA6870_LOWLEVEL__Reset</a> (void)</td></tr>
<tr class="memdesc:ga92592440101f5f45a271920b6d40a773"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate a reset pulse on the [Just discovered] No reset line :(.  <a href="#ga92592440101f5f45a271920b6d40a773">More...</a><br /></td></tr>
<tr class="separator:ga92592440101f5f45a271920b6d40a773"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga84fd5c0dfcadafaba0fee7c0f89960a4"><td class="memItemLeft" align="right" valign="top">static Luint16&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___a_t_a6870_____l_o_w_l_e_v_e_l.html#ga84fd5c0dfcadafaba0fee7c0f89960a4">u16ATA6870_LOWLEVEL__Tx_DeviceID</a> (Luint8 u8DeviceIndex, Luint8 *pu8CRC)</td></tr>
<tr class="memdesc:ga84fd5c0dfcadafaba0fee7c0f89960a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transmit the device ID portion on the SPI transaction.  <a href="#ga84fd5c0dfcadafaba0fee7c0f89960a4">More...</a><br /></td></tr>
<tr class="separator:ga84fd5c0dfcadafaba0fee7c0f89960a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4b1efdf4a08f6154340fdee57150f075"><td class="memItemLeft" align="right" valign="top">static Luint8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___a_t_a6870_____l_o_w_l_e_v_e_l.html#ga4b1efdf4a08f6154340fdee57150f075">u8ATA6870_LOWLEVEL__CRC</a> (Luint8 u8InitialCRC, Luint8 u8Data)</td></tr>
<tr class="memdesc:ga4b1efdf4a08f6154340fdee57150f075"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute one byte of the CRC.  <a href="#ga4b1efdf4a08f6154340fdee57150f075">More...</a><br /></td></tr>
<tr class="separator:ga4b1efdf4a08f6154340fdee57150f075"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaad6d63b3411c3eae8561c1ca16f1b933"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___a_t_a6870_____l_o_w_l_e_v_e_l.html#gaad6d63b3411c3eae8561c1ca16f1b933">vATA6870_LOWLEVEL__Init</a> (void)</td></tr>
<tr class="memdesc:gaad6d63b3411c3eae8561c1ca16f1b933"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform an init of any low level systems, including IO pins.  <a href="#gaad6d63b3411c3eae8561c1ca16f1b933">More...</a><br /></td></tr>
<tr class="separator:gaad6d63b3411c3eae8561c1ca16f1b933"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9169e0a4e5b03cf68bbc0ccab3e5e0ea"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___a_t_a6870_____l_o_w_l_e_v_e_l.html#ga9169e0a4e5b03cf68bbc0ccab3e5e0ea">vATA6870_LOWLEVEL__Reg_WriteU8</a> (Luint8 u8DeviceIndex, <a class="el" href="ata6870____register__defs_8h.html#a81ca753d0892f1e7aaf4121cd18bbd57">ATA6870_REGS_T</a> eRegister, Luint8 *pu8Data, Luint8 u8Length)</td></tr>
<tr class="memdesc:ga9169e0a4e5b03cf68bbc0ccab3e5e0ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a U8 to a devices register.  <a href="#ga9169e0a4e5b03cf68bbc0ccab3e5e0ea">More...</a><br /></td></tr>
<tr class="separator:ga9169e0a4e5b03cf68bbc0ccab3e5e0ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad9081db4f51c40aeb11d0a82b0b21d3b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___a_t_a6870_____l_o_w_l_e_v_e_l.html#gad9081db4f51c40aeb11d0a82b0b21d3b">vATA6870_LOWLEVEL__Reg_ReadU8</a> (Luint8 u8DeviceIndex, <a class="el" href="ata6870____register__defs_8h.html#a81ca753d0892f1e7aaf4121cd18bbd57">ATA6870_REGS_T</a> eRegister, Luint8 *pu8Data, Luint8 u8Length)</td></tr>
<tr class="memdesc:gad9081db4f51c40aeb11d0a82b0b21d3b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a byte / byte array from a device with a given length.  <a href="#gad9081db4f51c40aeb11d0a82b0b21d3b">More...</a><br /></td></tr>
<tr class="separator:gad9081db4f51c40aeb11d0a82b0b21d3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga156ce12539d0de358e95d274f61f7941"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___a_t_a6870_____l_o_w_l_e_v_e_l.html#ga156ce12539d0de358e95d274f61f7941">vATA6870_LOWLEVEL__PowerOn</a> (void)</td></tr>
<tr class="memdesc:ga156ce12539d0de358e95d274f61f7941"><td class="mdescLeft">&#160;</td><td class="mdescRight">Switch the power on to the BMS pod.  <a href="#ga156ce12539d0de358e95d274f61f7941">More...</a><br /></td></tr>
<tr class="separator:ga156ce12539d0de358e95d274f61f7941"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa64af803e44d3cb14e017303231a6231"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___a_t_a6870_____l_o_w_l_e_v_e_l.html#gaa64af803e44d3cb14e017303231a6231">vATA6870_LOWLEVEL__PowerOff</a> (void)</td></tr>
<tr class="memdesc:gaa64af803e44d3cb14e017303231a6231"><td class="mdescLeft">&#160;</td><td class="mdescRight">Switch the power off control signal to the BMS pod.  <a href="#gaa64af803e44d3cb14e017303231a6231">More...</a><br /></td></tr>
<tr class="separator:gaa64af803e44d3cb14e017303231a6231"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabeadba668da7fd9142b99f8dff548b28"><td class="memItemLeft" align="right" valign="top">Luint8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___a_t_a6870_____l_o_w_l_e_v_e_l.html#gabeadba668da7fd9142b99f8dff548b28">u8ATA6870_LOWLEVEL__Get_PowerAvail</a> (void)</td></tr>
<tr class="memdesc:gabeadba668da7fd9142b99f8dff548b28"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check the power available signal.  <a href="#gabeadba668da7fd9142b99f8dff548b28">More...</a><br /></td></tr>
<tr class="separator:gabeadba668da7fd9142b99f8dff548b28"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:gae448eed71fc49a40dd3e52a17b4753a8"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="struct__str6870.html">_str6870</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___a_t_a6870_____l_o_w_l_e_v_e_l.html#gae448eed71fc49a40dd3e52a17b4753a8">sATA6870</a></td></tr>
<tr class="separator:gae448eed71fc49a40dd3e52a17b4753a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga84fd5c0dfcadafaba0fee7c0f89960a4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Luint16 u16ATA6870_LOWLEVEL__Tx_DeviceID </td>
          <td>(</td>
          <td class="paramtype">Luint8&#160;</td>
          <td class="paramname"><em>u8DeviceIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Luint8 *&#160;</td>
          <td class="paramname"><em>pu8CRC</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Transmit the device ID portion on the SPI transaction. </p>
<p>The DEV ID is the first two bytes indicating which device in the string we are communicating with</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*pu8CRC</td><td>The initial CRC and the returned CRC </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">u8DeviceIndex</td><td>The device index in the chain we want to communicate with. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>SafeTool Function MD5:</dt><dd>E70039B823AADE9EDC66F03F56222AAB </dd></dl>
<dl class="section user"><dt>SafeTool Function ID:</dt><dd>LCCM650R0.FILE.005.FUNC.004 </dd></dl>

<p>References <a class="el" href="group___a_t_a6870_____l_o_w_l_e_v_e_l.html#ga4b1efdf4a08f6154340fdee57150f075">u8ATA6870_LOWLEVEL__CRC()</a>.</p>

<p>Referenced by <a class="el" href="group___a_t_a6870_____l_o_w_l_e_v_e_l.html#gad9081db4f51c40aeb11d0a82b0b21d3b">vATA6870_LOWLEVEL__Reg_ReadU8()</a>, and <a class="el" href="group___a_t_a6870_____l_o_w_l_e_v_e_l.html#ga9169e0a4e5b03cf68bbc0ccab3e5e0ea">vATA6870_LOWLEVEL__Reg_WriteU8()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___a_t_a6870_____l_o_w_l_e_v_e_l_ga84fd5c0dfcadafaba0fee7c0f89960a4_cgraph.png" border="0" usemap="#group___a_t_a6870_____l_o_w_l_e_v_e_l_ga84fd5c0dfcadafaba0fee7c0f89960a4_cgraph" alt=""/></div>
<map name="group___a_t_a6870_____l_o_w_l_e_v_e_l_ga84fd5c0dfcadafaba0fee7c0f89960a4_cgraph" id="group___a_t_a6870_____l_o_w_l_e_v_e_l_ga84fd5c0dfcadafaba0fee7c0f89960a4_cgraph">
<area shape="rect" id="node2" href="group___a_t_a6870_____l_o_w_l_e_v_e_l.html#ga4b1efdf4a08f6154340fdee57150f075" title="Compute one byte of the CRC. " alt="" coords="228,13,436,39"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___a_t_a6870_____l_o_w_l_e_v_e_l_ga84fd5c0dfcadafaba0fee7c0f89960a4_icgraph.png" border="0" usemap="#group___a_t_a6870_____l_o_w_l_e_v_e_l_ga84fd5c0dfcadafaba0fee7c0f89960a4_icgraph" alt=""/></div>
<map name="group___a_t_a6870_____l_o_w_l_e_v_e_l_ga84fd5c0dfcadafaba0fee7c0f89960a4_icgraph" id="group___a_t_a6870_____l_o_w_l_e_v_e_l_ga84fd5c0dfcadafaba0fee7c0f89960a4_icgraph">
<area shape="rect" id="node2" href="group___a_t_a6870_____l_o_w_l_e_v_e_l.html#gad9081db4f51c40aeb11d0a82b0b21d3b" title="Read a byte / byte array from a device with a given length. " alt="" coords="228,188,393,229"/>
<area shape="rect" id="node16" href="group___a_t_a6870_____l_o_w_l_e_v_e_l.html#ga9169e0a4e5b03cf68bbc0ccab3e5e0ea" title="Write a U8 to a devices register. " alt="" coords="228,348,393,389"/>
<area shape="rect" id="node3" href="group___a_t_a6870_____c_e_l_l___v_o_l_t.html#ga7ff31c66d77e49d6a1f5a549aad5b912" title="Gets the voltages for each cell from a specific BMS device. " alt="" coords="457,5,611,47"/>
<area shape="rect" id="node6" href="group___a_t_a6870_____r_e_s_i_s_t_o_r_s.html#ga7f0d8bca7c58a116e64f17939df9e351" title="Turn on an individual discharge resistor. " alt="" coords="449,305,619,331"/>
<area shape="rect" id="node11" href="group___a_t_a6870_____r_e_s_i_s_t_o_r_s.html#ga23c1ee8e1d92e772a261d306a53c7e8a" title="Turn off an individual discharge resistor. " alt="" coords="449,355,619,382"/>
<area shape="rect" id="node12" href="group___a_t_a6870_____s_c_a_n.html#ga9f664bd9b7c6862f8bf47939bebd3ea0" title="Scans the bus for devices. " alt="" coords="1224,109,1389,135"/>
<area shape="rect" id="node13" href="group___a_t_a6870_____s_t_a_t_u_s.html#ga0cec67bca791701be1e333f57acd3e38" title="Returns the Op Status register details. " alt="" coords="443,123,625,164"/>
<area shape="rect" id="node15" href="group___a_t_a6870_____s_t_a_t_u_s.html#gafba1240e496181442286ed65f3804d97" title="Gets the status of the IRQ system. " alt="" coords="443,188,625,229"/>
<area shape="rect" id="node4" href="group___a_t_a6870_____c_e_l_l___v_o_l_t.html#gac40484d77864f9cf2d51ab251fd5e5c8" title="bulk read voltages: 6 voltages, 1 temperature " alt="" coords="927,19,1153,46"/>
<area shape="rect" id="node5" href="group___a_t_a6870_____c_o_r_e.html#gafec017c818f276c487a846ffe3dfa7a9" title="Process any ATA6870 tasks. " alt="" coords="1460,195,1603,222"/>
<area shape="rect" id="node7" href="group___a_t_a6870_____b_a_l_a_n_c_e.html#ga4fbf757d8bc0eaeb4e489c87fc59aa7b" title="vATA6870_BALANCE__Manual" alt="" coords="675,293,879,319"/>
<area shape="rect" id="node8" href="group___a_t_a6870_____b_a_l_a_n_c_e.html#ga957aa8f61f79294a3379825b03badbe3" title="Handle the actual discharging. " alt="" coords="695,344,859,385"/>
<area shape="rect" id="node9" href="group___a_t_a6870_____b_a_l_a_n_c_e.html#ga7eceadbb00e08c5f3c1a17a3a805157b" title="Do the balancing. " alt="" coords="951,351,1129,378"/>
<area shape="rect" id="node10" href="group___a_t_a6870_____b_a_l_a_n_c_e.html#ga35c425a47779f4893caca3dcbd015707" title="Process the balancer state machine. " alt="" coords="1201,351,1412,378"/>
<area shape="rect" id="node14" href="group___a_t_a6870_____c_o_r_e.html#ga1b04a7c76fb5f90368f20d230b4ce997" title="Start ATA6870N Conversion. " alt="" coords="684,195,869,222"/>
<area shape="rect" id="node17" href="group___a_t_a6870_____r_e_s_i_s_t_o_r_s.html#gab881482bec60f5d93439668bccba1705" title="Turn off all resistors. " alt="" coords="442,406,626,433"/>
<area shape="rect" id="node19" href="group___a_t_a6870_____u_n_d_e_r_v_o_l_t.html#gaf8e7f8e02a5f1073ef53ca3d5391d395" title="Set the under voltage threshold value. " alt="" coords="441,457,627,483"/>
<area shape="rect" id="node18" href="group___a_t_a6870_____b_a_l_a_n_c_e.html#ga2af6743461fb48e555818980f53e9757" title="Stop the blanacing process and terminate any discharging resistors. " alt="" coords="945,406,1135,433"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga4b1efdf4a08f6154340fdee57150f075"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Luint8 u8ATA6870_LOWLEVEL__CRC </td>
          <td>(</td>
          <td class="paramtype">Luint8&#160;</td>
          <td class="paramname"><em>u8InitialCRC</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Luint8&#160;</td>
          <td class="paramname"><em>u8Data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compute one byte of the CRC. </p>
<dl class="section note"><dt>Note</dt><dd>7.6.4.7 CHKSUM Field The ATA6870N provides the possibility of verifying the transmitted data using a checksum. Setting chksum_ena bit to 1 in the Ctrl register [default = 0) activates the checksum feature. The chksum field is an 8-bit checksum computed from the proceeding data [control and data fields, byte 3 to byte n-1). It is based on the polynomial x8+x2+x1+1. The way it is computed is depicted below:</dd></dl>
<p>The checksum is calculated from the CONTROL field and DATA field by a polynomial division. The DATA field can consist of 1 byte up to 14 bytes [112-bit read-only â€œburst accessâ€�). The IDENTIFICATION field [2 bytes) is not used to generate the checksum. The checksum is always sent by the microcontroller, independent of read write mode. The checksum is in the LFSR [linear feedback shift register) when the complete bitstream [the whole fields of the transaction) followed by 0x00 have been shifted in the LFSR. The checksum verification on the complete data transmission was OK when the complete bitstream followed by the checksum have been shifted in the LFSR, and the content of the LFSR is 0x00. If this is not the case, the receiving ATA6870N will set the chkError bit in the status register. This will cause an interrupt to the MCU if the chkError is not masked by the chkErrorMsk bit in the IrqMask register. See the example below. The checksum is serially computed from the 8-bit value 0x57. So the bitstream 0x5700 is shifted in the LFSR. The resulting checksum is [f6o, f6i, f5i â€¦ f0i] at the last shift in cycle: During an SPI write access, the checksum is computed by the MCU and sent MSB first in the CHKSUM field. For an SPI read access, the checksum is computed by the ATA6870N and is checked by the MCU. During CHKSUM, MCU has to send 0x00 on MOSI, and must check that its own LFSR equals 0x00 at the end of CHKSUM field.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">u8Data</td><td>The new data value to add to the CRC. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">u8InitialCRC</td><td>The initial CRC conditions. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The new CRC </dd></dl>
<dl class="section user"><dt>SafeTool Function MD5:</dt><dd>C63B72390C8571071FCB24F7F6810D19 </dd></dl>
<dl class="section user"><dt>SafeTool Function ID:</dt><dd>LCCM650R0.FILE.005.FUNC.005 </dd></dl>

<p>Referenced by <a class="el" href="group___a_t_a6870_____l_o_w_l_e_v_e_l.html#ga84fd5c0dfcadafaba0fee7c0f89960a4">u16ATA6870_LOWLEVEL__Tx_DeviceID()</a>, <a class="el" href="group___a_t_a6870_____l_o_w_l_e_v_e_l.html#gad9081db4f51c40aeb11d0a82b0b21d3b">vATA6870_LOWLEVEL__Reg_ReadU8()</a>, and <a class="el" href="group___a_t_a6870_____l_o_w_l_e_v_e_l.html#ga9169e0a4e5b03cf68bbc0ccab3e5e0ea">vATA6870_LOWLEVEL__Reg_WriteU8()</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___a_t_a6870_____l_o_w_l_e_v_e_l_ga4b1efdf4a08f6154340fdee57150f075_icgraph.png" border="0" usemap="#group___a_t_a6870_____l_o_w_l_e_v_e_l_ga4b1efdf4a08f6154340fdee57150f075_icgraph" alt=""/></div>
<map name="group___a_t_a6870_____l_o_w_l_e_v_e_l_ga4b1efdf4a08f6154340fdee57150f075_icgraph" id="group___a_t_a6870_____l_o_w_l_e_v_e_l_ga4b1efdf4a08f6154340fdee57150f075_icgraph">
<area shape="rect" id="node2" href="group___a_t_a6870_____l_o_w_l_e_v_e_l.html#ga84fd5c0dfcadafaba0fee7c0f89960a4" title="Transmit the device ID portion on the SPI transaction. " alt="" coords="261,271,436,312"/>
<area shape="rect" id="node3" href="group___a_t_a6870_____l_o_w_l_e_v_e_l.html#gad9081db4f51c40aeb11d0a82b0b21d3b" title="Read a byte / byte array from a device with a given length. " alt="" coords="484,189,649,231"/>
<area shape="rect" id="node17" href="group___a_t_a6870_____l_o_w_l_e_v_e_l.html#ga9169e0a4e5b03cf68bbc0ccab3e5e0ea" title="Write a U8 to a devices register. " alt="" coords="484,337,649,379"/>
<area shape="rect" id="node4" href="group___a_t_a6870_____c_e_l_l___v_o_l_t.html#ga7ff31c66d77e49d6a1f5a549aad5b912" title="Gets the voltages for each cell from a specific BMS device. " alt="" coords="713,5,867,47"/>
<area shape="rect" id="node7" href="group___a_t_a6870_____r_e_s_i_s_t_o_r_s.html#ga7f0d8bca7c58a116e64f17939df9e351" title="Turn on an individual discharge resistor. " alt="" coords="705,305,875,331"/>
<area shape="rect" id="node12" href="group___a_t_a6870_____r_e_s_i_s_t_o_r_s.html#ga23c1ee8e1d92e772a261d306a53c7e8a" title="Turn off an individual discharge resistor. " alt="" coords="705,355,875,382"/>
<area shape="rect" id="node13" href="group___a_t_a6870_____s_c_a_n.html#ga9f664bd9b7c6862f8bf47939bebd3ea0" title="Scans the bus for devices. " alt="" coords="1480,109,1645,135"/>
<area shape="rect" id="node14" href="group___a_t_a6870_____s_t_a_t_u_s.html#ga0cec67bca791701be1e333f57acd3e38" title="Returns the Op Status register details. " alt="" coords="699,123,881,164"/>
<area shape="rect" id="node16" href="group___a_t_a6870_____s_t_a_t_u_s.html#gafba1240e496181442286ed65f3804d97" title="Gets the status of the IRQ system. " alt="" coords="699,188,881,229"/>
<area shape="rect" id="node5" href="group___a_t_a6870_____c_e_l_l___v_o_l_t.html#gac40484d77864f9cf2d51ab251fd5e5c8" title="bulk read voltages: 6 voltages, 1 temperature " alt="" coords="1183,19,1409,46"/>
<area shape="rect" id="node6" href="group___a_t_a6870_____c_o_r_e.html#gafec017c818f276c487a846ffe3dfa7a9" title="Process any ATA6870 tasks. " alt="" coords="1716,195,1859,222"/>
<area shape="rect" id="node8" href="group___a_t_a6870_____b_a_l_a_n_c_e.html#ga4fbf757d8bc0eaeb4e489c87fc59aa7b" title="vATA6870_BALANCE__Manual" alt="" coords="931,293,1135,319"/>
<area shape="rect" id="node9" href="group___a_t_a6870_____b_a_l_a_n_c_e.html#ga957aa8f61f79294a3379825b03badbe3" title="Handle the actual discharging. " alt="" coords="951,344,1115,385"/>
<area shape="rect" id="node10" href="group___a_t_a6870_____b_a_l_a_n_c_e.html#ga7eceadbb00e08c5f3c1a17a3a805157b" title="Do the balancing. " alt="" coords="1207,351,1385,378"/>
<area shape="rect" id="node11" href="group___a_t_a6870_____b_a_l_a_n_c_e.html#ga35c425a47779f4893caca3dcbd015707" title="Process the balancer state machine. " alt="" coords="1457,351,1668,378"/>
<area shape="rect" id="node15" href="group___a_t_a6870_____c_o_r_e.html#ga1b04a7c76fb5f90368f20d230b4ce997" title="Start ATA6870N Conversion. " alt="" coords="940,195,1125,222"/>
<area shape="rect" id="node18" href="group___a_t_a6870_____r_e_s_i_s_t_o_r_s.html#gab881482bec60f5d93439668bccba1705" title="Turn off all resistors. " alt="" coords="698,406,882,433"/>
<area shape="rect" id="node20" href="group___a_t_a6870_____u_n_d_e_r_v_o_l_t.html#gaf8e7f8e02a5f1073ef53ca3d5391d395" title="Set the under voltage threshold value. " alt="" coords="697,457,883,483"/>
<area shape="rect" id="node19" href="group___a_t_a6870_____b_a_l_a_n_c_e.html#ga2af6743461fb48e555818980f53e9757" title="Stop the blanacing process and terminate any discharging resistors. " alt="" coords="1201,406,1391,433"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gabeadba668da7fd9142b99f8dff548b28"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Luint8 u8ATA6870_LOWLEVEL__Get_PowerAvail </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check the power available signal. </p>
<dl class="section return"><dt>Returns</dt><dd>1 = Power is on the BMS device<br />
 0 = no power avail. </dd></dl>
<dl class="section user"><dt>SafeTool Function MD5:</dt><dd>A26A5127AD35DF7F7C6CBE88C04722A4 </dd></dl>
<dl class="section user"><dt>SafeTool Function ID:</dt><dd>LCCM650R0.FILE.005.FUNC.009 </dd></dl>

</div>
</div>
<a class="anchor" id="gaad6d63b3411c3eae8561c1ca16f1b933"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vATA6870_LOWLEVEL__Init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Perform an init of any low level systems, including IO pins. </p>
<dl class="section user"><dt>SafeTool Function MD5:</dt><dd>B097BAEE07BFD2D10039B3FAF2B830F1 </dd></dl>
<dl class="section user"><dt>SafeTool Function ID:</dt><dd>LCCM650R0.FILE.005.FUNC.001 </dd></dl>

<p>References <a class="el" href="group___a_t_a6870_____l_o_w_l_e_v_e_l.html#ga92592440101f5f45a271920b6d40a773">vATA6870_LOWLEVEL__Reset()</a>.</p>

<p>Referenced by <a class="el" href="group___a_t_a6870_____c_o_r_e.html#ga134d692ccaea43b827bd40f8aa620937">vATA6870__Init()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___a_t_a6870_____l_o_w_l_e_v_e_l_gaad6d63b3411c3eae8561c1ca16f1b933_cgraph.png" border="0" usemap="#group___a_t_a6870_____l_o_w_l_e_v_e_l_gaad6d63b3411c3eae8561c1ca16f1b933_cgraph" alt=""/></div>
<map name="group___a_t_a6870_____l_o_w_l_e_v_e_l_gaad6d63b3411c3eae8561c1ca16f1b933_cgraph" id="group___a_t_a6870_____l_o_w_l_e_v_e_l_gaad6d63b3411c3eae8561c1ca16f1b933_cgraph">
<area shape="rect" id="node2" href="group___a_t_a6870_____l_o_w_l_e_v_e_l.html#ga92592440101f5f45a271920b6d40a773" title="Generate a reset pulse on the [Just discovered] No reset line :(. " alt="" coords="243,5,408,47"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___a_t_a6870_____l_o_w_l_e_v_e_l_gaad6d63b3411c3eae8561c1ca16f1b933_icgraph.png" border="0" usemap="#group___a_t_a6870_____l_o_w_l_e_v_e_l_gaad6d63b3411c3eae8561c1ca16f1b933_icgraph" alt=""/></div>
<map name="group___a_t_a6870_____l_o_w_l_e_v_e_l_gaad6d63b3411c3eae8561c1ca16f1b933_icgraph" id="group___a_t_a6870_____l_o_w_l_e_v_e_l_gaad6d63b3411c3eae8561c1ca16f1b933_icgraph">
<area shape="rect" id="node2" href="group___a_t_a6870_____c_o_r_e.html#ga134d692ccaea43b827bd40f8aa620937" title="Init any ATA6870 systems. " alt="" coords="243,5,353,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gaa64af803e44d3cb14e017303231a6231"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vATA6870_LOWLEVEL__PowerOff </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Switch the power off control signal to the BMS pod. </p>
<dl class="section user"><dt>SafeTool Function MD5:</dt><dd>5E2B8A13F25C190740AB36DC429FFC0E </dd></dl>
<dl class="section user"><dt>SafeTool Function ID:</dt><dd>LCCM650R0.FILE.005.FUNC.008 </dd></dl>

</div>
</div>
<a class="anchor" id="ga156ce12539d0de358e95d274f61f7941"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vATA6870_LOWLEVEL__PowerOn </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Switch the power on to the BMS pod. </p>
<dl class="section user"><dt>SafeTool Function MD5:</dt><dd>D0A7A5D65486B84F91C1390D6882133B </dd></dl>
<dl class="section user"><dt>SafeTool Function ID:</dt><dd>LCCM650R0.FILE.005.FUNC.007 </dd></dl>

<p>Referenced by <a class="el" href="group___a_t_a6870_____c_o_r_e.html#ga134d692ccaea43b827bd40f8aa620937">vATA6870__Init()</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___a_t_a6870_____l_o_w_l_e_v_e_l_ga156ce12539d0de358e95d274f61f7941_icgraph.png" border="0" usemap="#group___a_t_a6870_____l_o_w_l_e_v_e_l_ga156ce12539d0de358e95d274f61f7941_icgraph" alt=""/></div>
<map name="group___a_t_a6870_____l_o_w_l_e_v_e_l_ga156ce12539d0de358e95d274f61f7941_icgraph" id="group___a_t_a6870_____l_o_w_l_e_v_e_l_ga156ce12539d0de358e95d274f61f7941_icgraph">
<area shape="rect" id="node2" href="group___a_t_a6870_____c_o_r_e.html#ga134d692ccaea43b827bd40f8aa620937" title="Init any ATA6870 systems. " alt="" coords="219,13,329,39"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gad9081db4f51c40aeb11d0a82b0b21d3b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vATA6870_LOWLEVEL__Reg_ReadU8 </td>
          <td>(</td>
          <td class="paramtype">Luint8&#160;</td>
          <td class="paramname"><em>u8DeviceIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ata6870____register__defs_8h.html#a81ca753d0892f1e7aaf4121cd18bbd57">ATA6870_REGS_T</a>&#160;</td>
          <td class="paramname"><em>eRegister</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Luint8 *&#160;</td>
          <td class="paramname"><em>pu8Data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Luint8&#160;</td>
          <td class="paramname"><em>u8Length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read a byte / byte array from a device with a given length. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">u8Length</td><td>The length of data we wish to read </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">*pu8Data</td><td>Pointer to the return data buffer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">eRegister</td><td>The register to hit </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">u8DeviceIndex</td><td>The device in the chain. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>SafeTool Function MD5:</dt><dd>AA80B12EE05101B24878CBEA3CDC34D7 </dd></dl>
<dl class="section user"><dt>SafeTool Function ID:</dt><dd>LCCM650R0.FILE.005.FUNC.006 </dd></dl>

<p>References <a class="el" href="group___a_t_a6870_____l_o_w_l_e_v_e_l.html#gae448eed71fc49a40dd3e52a17b4753a8">sATA6870</a>, <a class="el" href="struct__str6870.html#a731c07ff4b1710b39b2d1898962b8a6d">_str6870::sDevice</a>, <a class="el" href="struct__str6870.html#a314cf656c27262d84aff3948b12ef7e0">_str6870::sIRQ</a>, <a class="el" href="group___a_t_a6870_____l_o_w_l_e_v_e_l.html#ga84fd5c0dfcadafaba0fee7c0f89960a4">u16ATA6870_LOWLEVEL__Tx_DeviceID()</a>, and <a class="el" href="group___a_t_a6870_____l_o_w_l_e_v_e_l.html#ga4b1efdf4a08f6154340fdee57150f075">u8ATA6870_LOWLEVEL__CRC()</a>.</p>

<p>Referenced by <a class="el" href="group___a_t_a6870_____s_t_a_t_u_s.html#gafba1240e496181442286ed65f3804d97">u8ATA6870_STATUS__Get_IRQ_Status()</a>, <a class="el" href="group___a_t_a6870_____s_t_a_t_u_s.html#ga0cec67bca791701be1e333f57acd3e38">u8ATA6870_STATUS__Get_Op_Status()</a>, <a class="el" href="group___a_t_a6870_____c_e_l_l___v_o_l_t.html#ga7ff31c66d77e49d6a1f5a549aad5b912">vATA6870_CELL__Get_Voltages()</a>, <a class="el" href="group___a_t_a6870_____r_e_s_i_s_t_o_r_s.html#ga23c1ee8e1d92e772a261d306a53c7e8a">vATA6870_RES__TurnOff()</a>, <a class="el" href="group___a_t_a6870_____r_e_s_i_s_t_o_r_s.html#ga7f0d8bca7c58a116e64f17939df9e351">vATA6870_RES__TurnOn()</a>, and <a class="el" href="group___a_t_a6870_____s_c_a_n.html#ga9f664bd9b7c6862f8bf47939bebd3ea0">vATA6870_SCAN__Start()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___a_t_a6870_____l_o_w_l_e_v_e_l_gad9081db4f51c40aeb11d0a82b0b21d3b_cgraph.png" border="0" usemap="#group___a_t_a6870_____l_o_w_l_e_v_e_l_gad9081db4f51c40aeb11d0a82b0b21d3b_cgraph" alt=""/></div>
<map name="group___a_t_a6870_____l_o_w_l_e_v_e_l_gad9081db4f51c40aeb11d0a82b0b21d3b_cgraph" id="group___a_t_a6870_____l_o_w_l_e_v_e_l_gad9081db4f51c40aeb11d0a82b0b21d3b_cgraph">
<area shape="rect" id="node2" href="group___a_t_a6870_____l_o_w_l_e_v_e_l.html#ga84fd5c0dfcadafaba0fee7c0f89960a4" title="Transmit the device ID portion on the SPI transaction. " alt="" coords="219,5,393,47"/>
<area shape="rect" id="node3" href="group___a_t_a6870_____l_o_w_l_e_v_e_l.html#ga4b1efdf4a08f6154340fdee57150f075" title="Compute one byte of the CRC. " alt="" coords="441,42,649,69"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___a_t_a6870_____l_o_w_l_e_v_e_l_gad9081db4f51c40aeb11d0a82b0b21d3b_icgraph.png" border="0" usemap="#group___a_t_a6870_____l_o_w_l_e_v_e_l_gad9081db4f51c40aeb11d0a82b0b21d3b_icgraph" alt=""/></div>
<map name="group___a_t_a6870_____l_o_w_l_e_v_e_l_gad9081db4f51c40aeb11d0a82b0b21d3b_icgraph" id="group___a_t_a6870_____l_o_w_l_e_v_e_l_gad9081db4f51c40aeb11d0a82b0b21d3b_icgraph">
<area shape="rect" id="node2" href="group___a_t_a6870_____s_t_a_t_u_s.html#gafba1240e496181442286ed65f3804d97" title="Gets the status of the IRQ system. " alt="" coords="219,5,400,47"/>
<area shape="rect" id="node5" href="group___a_t_a6870_____s_t_a_t_u_s.html#ga0cec67bca791701be1e333f57acd3e38" title="Returns the Op Status register details. " alt="" coords="219,71,400,112"/>
<area shape="rect" id="node6" href="group___a_t_a6870_____c_e_l_l___v_o_l_t.html#ga7ff31c66d77e49d6a1f5a549aad5b912" title="Gets the voltages for each cell from a specific BMS device. " alt="" coords="473,117,627,159"/>
<area shape="rect" id="node8" href="group___a_t_a6870_____r_e_s_i_s_t_o_r_s.html#ga23c1ee8e1d92e772a261d306a53c7e8a" title="Turn off an individual discharge resistor. " alt="" coords="225,187,394,214"/>
<area shape="rect" id="node13" href="group___a_t_a6870_____r_e_s_i_s_t_o_r_s.html#ga7f0d8bca7c58a116e64f17939df9e351" title="Turn on an individual discharge resistor. " alt="" coords="224,238,395,265"/>
<area shape="rect" id="node14" href="group___a_t_a6870_____s_c_a_n.html#ga9f664bd9b7c6862f8bf47939bebd3ea0" title="Scans the bus for devices. " alt="" coords="997,297,1163,323"/>
<area shape="rect" id="node3" href="group___a_t_a6870_____c_o_r_e.html#ga1b04a7c76fb5f90368f20d230b4ce997" title="Start ATA6870N Conversion. " alt="" coords="457,66,643,93"/>
<area shape="rect" id="node4" href="group___a_t_a6870_____c_o_r_e.html#gafec017c818f276c487a846ffe3dfa7a9" title="Process any ATA6870 tasks. " alt="" coords="1233,197,1376,223"/>
<area shape="rect" id="node7" href="group___a_t_a6870_____c_e_l_l___v_o_l_t.html#gac40484d77864f9cf2d51ab251fd5e5c8" title="bulk read voltages: 6 voltages, 1 temperature " alt="" coords="700,130,927,157"/>
<area shape="rect" id="node9" href="group___a_t_a6870_____b_a_l_a_n_c_e.html#ga4fbf757d8bc0eaeb4e489c87fc59aa7b" title="vATA6870_BALANCE__Manual" alt="" coords="448,183,652,210"/>
<area shape="rect" id="node10" href="group___a_t_a6870_____b_a_l_a_n_c_e.html#ga957aa8f61f79294a3379825b03badbe3" title="Handle the actual discharging. " alt="" coords="468,235,632,276"/>
<area shape="rect" id="node11" href="group___a_t_a6870_____b_a_l_a_n_c_e.html#ga7eceadbb00e08c5f3c1a17a3a805157b" title="Do the balancing. " alt="" coords="724,238,903,265"/>
<area shape="rect" id="node12" href="group___a_t_a6870_____b_a_l_a_n_c_e.html#ga35c425a47779f4893caca3dcbd015707" title="Process the balancer state machine. " alt="" coords="975,230,1185,257"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga9169e0a4e5b03cf68bbc0ccab3e5e0ea"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vATA6870_LOWLEVEL__Reg_WriteU8 </td>
          <td>(</td>
          <td class="paramtype">Luint8&#160;</td>
          <td class="paramname"><em>u8DeviceIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ata6870____register__defs_8h.html#a81ca753d0892f1e7aaf4121cd18bbd57">ATA6870_REGS_T</a>&#160;</td>
          <td class="paramname"><em>eRegister</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Luint8 *&#160;</td>
          <td class="paramname"><em>pu8Data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Luint8&#160;</td>
          <td class="paramname"><em>u8Length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a U8 to a devices register. </p>
<dl class="section note"><dt>Note</dt><dd>This function will master the bus and take command of the chip selects and other SPI functions</dd>
<dd>
7.6.4.1 SPI Transaction Fields Most of the time, the SPI frame is defined by 4 distinct fields: <h2>NAME SIZE DETAILS </h2>
</dd></dl>
<p>IDENTIFICATION 2 bytes 16-bit chip identification (MOSI), in parallel 16-bit IRQ state (MISO) CONTROL 1 byte 7-bit register address + 1-bit read/write information (MOSI) DATA k byte k*8 bits data (MOSI or MISO depending on the access direction) CHKSUM 1 byte 8 bits if the Chksum_ena bit is set in the Ctrl register (register 0x01, bit 4)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">u8Length</td><td>The length of the data to write </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*pu8Data</td><td>Pointer to the array of data to write </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">eRegister</td><td>The register type. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">u8DeviceIndex</td><td>The ATA6870N device index on the bus. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>SafeTool Function MD5:</dt><dd>7048DDE8AD40E5D2EF88FD15233E859C </dd></dl>
<dl class="section user"><dt>SafeTool Function ID:</dt><dd>LCCM650R0.FILE.005.FUNC.002 </dd></dl>

<p>References <a class="el" href="group___a_t_a6870_____l_o_w_l_e_v_e_l.html#gae448eed71fc49a40dd3e52a17b4753a8">sATA6870</a>, <a class="el" href="struct__str6870.html#a731c07ff4b1710b39b2d1898962b8a6d">_str6870::sDevice</a>, <a class="el" href="struct__str6870.html#a314cf656c27262d84aff3948b12ef7e0">_str6870::sIRQ</a>, <a class="el" href="group___a_t_a6870_____l_o_w_l_e_v_e_l.html#ga84fd5c0dfcadafaba0fee7c0f89960a4">u16ATA6870_LOWLEVEL__Tx_DeviceID()</a>, and <a class="el" href="group___a_t_a6870_____l_o_w_l_e_v_e_l.html#ga4b1efdf4a08f6154340fdee57150f075">u8ATA6870_LOWLEVEL__CRC()</a>.</p>

<p>Referenced by <a class="el" href="group___a_t_a6870_____c_o_r_e.html#gafec017c818f276c487a846ffe3dfa7a9">vATA6870__Process()</a>, <a class="el" href="group___a_t_a6870_____c_o_r_e.html#ga1b04a7c76fb5f90368f20d230b4ce997">vATA6870__StartConversion()</a>, <a class="el" href="group___a_t_a6870_____r_e_s_i_s_t_o_r_s.html#gab881482bec60f5d93439668bccba1705">vATA6870_RES__TurnAllOff()</a>, <a class="el" href="group___a_t_a6870_____r_e_s_i_s_t_o_r_s.html#ga23c1ee8e1d92e772a261d306a53c7e8a">vATA6870_RES__TurnOff()</a>, <a class="el" href="group___a_t_a6870_____r_e_s_i_s_t_o_r_s.html#ga7f0d8bca7c58a116e64f17939df9e351">vATA6870_RES__TurnOn()</a>, and <a class="el" href="group___a_t_a6870_____u_n_d_e_r_v_o_l_t.html#gaf8e7f8e02a5f1073ef53ca3d5391d395">vATA6870_UV__Set_UVTrip()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___a_t_a6870_____l_o_w_l_e_v_e_l_ga9169e0a4e5b03cf68bbc0ccab3e5e0ea_cgraph.png" border="0" usemap="#group___a_t_a6870_____l_o_w_l_e_v_e_l_ga9169e0a4e5b03cf68bbc0ccab3e5e0ea_cgraph" alt=""/></div>
<map name="group___a_t_a6870_____l_o_w_l_e_v_e_l_ga9169e0a4e5b03cf68bbc0ccab3e5e0ea_cgraph" id="group___a_t_a6870_____l_o_w_l_e_v_e_l_ga9169e0a4e5b03cf68bbc0ccab3e5e0ea_cgraph">
<area shape="rect" id="node2" href="group___a_t_a6870_____l_o_w_l_e_v_e_l.html#ga84fd5c0dfcadafaba0fee7c0f89960a4" title="Transmit the device ID portion on the SPI transaction. " alt="" coords="219,5,393,47"/>
<area shape="rect" id="node3" href="group___a_t_a6870_____l_o_w_l_e_v_e_l.html#ga4b1efdf4a08f6154340fdee57150f075" title="Compute one byte of the CRC. " alt="" coords="441,42,649,69"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___a_t_a6870_____l_o_w_l_e_v_e_l_ga9169e0a4e5b03cf68bbc0ccab3e5e0ea_icgraph.png" border="0" usemap="#group___a_t_a6870_____l_o_w_l_e_v_e_l_ga9169e0a4e5b03cf68bbc0ccab3e5e0ea_icgraph" alt=""/></div>
<map name="group___a_t_a6870_____l_o_w_l_e_v_e_l_ga9169e0a4e5b03cf68bbc0ccab3e5e0ea_icgraph" id="group___a_t_a6870_____l_o_w_l_e_v_e_l_ga9169e0a4e5b03cf68bbc0ccab3e5e0ea_icgraph">
<area shape="rect" id="node2" href="group___a_t_a6870_____c_o_r_e.html#gafec017c818f276c487a846ffe3dfa7a9" title="Process any ATA6870 tasks. " alt="" coords="1200,43,1343,69"/>
<area shape="rect" id="node3" href="group___a_t_a6870_____c_o_r_e.html#ga1b04a7c76fb5f90368f20d230b4ce997" title="Start ATA6870N Conversion. " alt="" coords="706,43,891,69"/>
<area shape="rect" id="node4" href="group___a_t_a6870_____r_e_s_i_s_t_o_r_s.html#gab881482bec60f5d93439668bccba1705" title="Turn off all resistors. " alt="" coords="462,93,646,120"/>
<area shape="rect" id="node7" href="group___a_t_a6870_____r_e_s_i_s_t_o_r_s.html#ga23c1ee8e1d92e772a261d306a53c7e8a" title="Turn off an individual discharge resistor. " alt="" coords="227,144,396,171"/>
<area shape="rect" id="node11" href="group___a_t_a6870_____r_e_s_i_s_t_o_r_s.html#ga7f0d8bca7c58a116e64f17939df9e351" title="Turn on an individual discharge resistor. " alt="" coords="226,195,397,221"/>
<area shape="rect" id="node12" href="group___a_t_a6870_____u_n_d_e_r_v_o_l_t.html#gaf8e7f8e02a5f1073ef53ca3d5391d395" title="Set the under voltage threshold value. " alt="" coords="219,245,404,272"/>
<area shape="rect" id="node5" href="group___a_t_a6870_____b_a_l_a_n_c_e.html#ga2af6743461fb48e555818980f53e9757" title="Stop the blanacing process and terminate any discharging resistors. " alt="" coords="704,93,893,120"/>
<area shape="rect" id="node6" href="group___a_t_a6870_____b_a_l_a_n_c_e.html#ga35c425a47779f4893caca3dcbd015707" title="Process the balancer state machine. " alt="" coords="941,93,1152,120"/>
<area shape="rect" id="node8" href="group___a_t_a6870_____b_a_l_a_n_c_e.html#ga4fbf757d8bc0eaeb4e489c87fc59aa7b" title="vATA6870_BALANCE__Manual" alt="" coords="452,144,656,171"/>
<area shape="rect" id="node9" href="group___a_t_a6870_____b_a_l_a_n_c_e.html#ga957aa8f61f79294a3379825b03badbe3" title="Handle the actual discharging. " alt="" coords="472,195,636,237"/>
<area shape="rect" id="node10" href="group___a_t_a6870_____b_a_l_a_n_c_e.html#ga7eceadbb00e08c5f3c1a17a3a805157b" title="Do the balancing. " alt="" coords="709,173,888,200"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga92592440101f5f45a271920b6d40a773"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void vATA6870_LOWLEVEL__Reset </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generate a reset pulse on the [Just discovered] No reset line :(. </p>
<dl class="section user"><dt>SafeTool Function MD5:</dt><dd>C191E716625B3D1604ED5FD8B46C5F98 </dd></dl>
<dl class="section user"><dt>SafeTool Function ID:</dt><dd>LCCM650R0.FILE.005.FUNC.003 </dd></dl>

<p>Referenced by <a class="el" href="group___a_t_a6870_____l_o_w_l_e_v_e_l.html#gaad6d63b3411c3eae8561c1ca16f1b933">vATA6870_LOWLEVEL__Init()</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___a_t_a6870_____l_o_w_l_e_v_e_l_ga92592440101f5f45a271920b6d40a773_icgraph.png" border="0" usemap="#group___a_t_a6870_____l_o_w_l_e_v_e_l_ga92592440101f5f45a271920b6d40a773_icgraph" alt=""/></div>
<map name="group___a_t_a6870_____l_o_w_l_e_v_e_l_ga92592440101f5f45a271920b6d40a773_icgraph" id="group___a_t_a6870_____l_o_w_l_e_v_e_l_ga92592440101f5f45a271920b6d40a773_icgraph">
<area shape="rect" id="node2" href="group___a_t_a6870_____l_o_w_l_e_v_e_l.html#gaad6d63b3411c3eae8561c1ca16f1b933" title="Perform an init of any low level systems, including IO pins. " alt="" coords="219,13,408,39"/>
<area shape="rect" id="node3" href="group___a_t_a6870_____c_o_r_e.html#ga134d692ccaea43b827bd40f8aa620937" title="Init any ATA6870 systems. " alt="" coords="456,13,567,39"/>
</map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="gae448eed71fc49a40dd3e52a17b4753a8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="struct__str6870.html">_str6870</a> sATA6870</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="group___a_t_a6870_____l_o_w_l_e_v_e_l.html#gad9081db4f51c40aeb11d0a82b0b21d3b">vATA6870_LOWLEVEL__Reg_ReadU8()</a>, and <a class="el" href="group___a_t_a6870_____l_o_w_l_e_v_e_l.html#ga9169e0a4e5b03cf68bbc0ccab3e5e0ea">vATA6870_LOWLEVEL__Reg_WriteU8()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
